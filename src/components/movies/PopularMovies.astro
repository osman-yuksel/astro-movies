---
import PopularMovies from "./PopularMovies";
import type { PM } from "../../movie";

// data fetching on server
const response = await fetch(
  `https://api.themoviedb.org/3/movie/popular?api_key=${
    import.meta.env.TMDB_API_KEY
  }&language=en-US&page=1`
);
const data = (await response.json()) as PM;
---

<section class="flex flex-col items-center h-[808px]">
  <div class="relative flex w-5/6 justify-center">
    <div
      class="absolute bottom-8 h-1 w-1/2 animate-hbg rounded-md bg-hbgrradiant bg-[length:2000%_2000%]"
    >
    </div>
    <h1 class="z-10 my-6 bg-black px-4 text-center text-4xl text-white">
      Popular Movies
    </h1>
  </div>
  <PopularMovies results={data.results} client:only />
</section>
